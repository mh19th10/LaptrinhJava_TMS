<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>TMS - B√°o c√°o & Th·ªëng k√™</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --primary-600: #0077FF;
      --accent: #6A8CFF;
      --muted: #64748b;
      --shadow-1: 0 2px 8px rgba(0,0,0,0.08);
      --shadow-2: 0 4px 12px rgba(0,0,0,0.1);
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #c8d5ff 0%, #e0d4f7 100%);
      min-height: 100vh;
      padding: 28px;
      color: #0f172a;
    }

    .app-container {
      display: flex;
      gap: 20px;
      max-width: 1400px;
      margin: 0 auto;
    }

    .sidebar {
      width: 260px;
      min-height: calc(100vh - 56px);
      background: linear-gradient(180deg, rgba(255,255,255,0.55), rgba(255,255,255,0.45));
      backdrop-filter: blur(8px);
      border-radius: 16px;
      padding: 20px;
      box-shadow: var(--shadow-2);
      position: sticky;
      top: 28px;
      align-self: flex-start;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .brand {
      display: flex;
      gap: 10px;
      align-items: center;
      padding-bottom: 8px;
      border-bottom: 1px solid rgba(15,23,42,0.04);
    }

    .brand .logo {
      width: 44px;
      height: 44px;
      border-radius: 10px;
      background: var(--accent);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 700;
      box-shadow: var(--shadow-1);
      font-size: 1.5rem;
    }

    .brand h3 {
      font-size: 1rem;
      margin: 0;
    }

    .small-muted {
      font-size: 0.85rem;
      color: var(--muted);
    }

    .nav {
      margin-top: 12px;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .nav a {
      text-decoration: none;
      color: #07305a;
      padding: 10px;
      border-radius: 10px;
      display: flex;
      gap: 10px;
      align-items: center;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .nav a.active, .nav a:hover {
      background: linear-gradient(90deg, rgba(0,119,255,0.12), rgba(106,140,255,0.06));
      color: var(--primary-600);
    }

    .main {
      flex: 1;
      min-height: calc(100vh - 56px);
    }

    .header-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 16px;
      margin-bottom: 20px;
    }

    .h1 {
      font-size: 1.8rem;
      font-weight: 700;
      color: white;
      margin-bottom: 4px;
    }

    .header-row .small-muted {
      color: rgba(255,255,255,0.85);
    }

    .card {
      background: white;
      border-radius: 14px;
      padding: 20px;
      box-shadow: var(--shadow-2);
      margin-bottom: 20px;
    }

    .h2 {
      font-size: 1.3rem;
      font-weight: 700;
      margin-bottom: 16px;
      color: #0f172a;
    }

    .report-filters {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 12px;
      margin-bottom: 20px;
    }

    .filter-group {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .filter-label {
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--muted);
    }

    .filter-select, .filter-input {
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid rgba(15,23,42,0.1);
      background: white;
      font-size: 0.9rem;
    }

    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.9rem;
    }

    .btn-primary {
      background: var(--primary-600);
      color: white;
    }

    .btn-primary:hover {
      background: #0066dd;
      transform: translateY(-2px);
      box-shadow: var(--shadow-1);
    }

    .btn-success {
      background: #10b981;
      color: white;
    }

    .btn-success:hover {
      background: #059669;
    }

    .btn-group {
      display: flex;
      gap: 12px;
      margin-top: 12px;
    }

    .charts-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      margin-bottom: 20px;
    }

    .chart-card {
      background: white;
      border-radius: 14px;
      padding: 20px;
      box-shadow: var(--shadow-2);
    }

    .chart-card.full-width {
      grid-column: 1 / -1;
    }

    .summary-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 16px;
      margin-bottom: 20px;
    }

    .summary-card {
      background: linear-gradient(135deg, #667eea, #764ba2);
      border-radius: 12px;
      padding: 20px;
      color: white;
      box-shadow: var(--shadow-1);
    }

    .summary-card .icon {
      font-size: 2.5rem;
      margin-bottom: 12px;
      opacity: 0.9;
    }

    .summary-card .num {
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 8px;
    }

    .summary-card .label {
      font-size: 0.9rem;
      opacity: 0.9;
    }

    .table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 12px;
    }

    .table thead {
      background: linear-gradient(90deg, #667eea, #764ba2);
    }

    .table thead th {
      padding: 12px;
      text-align: left;
      color: white;
      font-weight: 600;
      font-size: 0.9rem;
    }

    .table thead th:first-child {
      border-radius: 8px 0 0 0;
    }

    .table thead th:last-child {
      border-radius: 0 8px 0 0;
    }

    .table tbody tr {
      border-bottom: 1px solid rgba(15,23,42,0.06);
      transition: background 0.2s ease;
    }

    .table tbody tr:hover {
      background: rgba(102,126,234,0.05);
    }

    .table tbody td {
      padding: 12px;
      font-size: 0.9rem;
    }

    .progress-bar {
      width: 100%;
      height: 8px;
      background: rgba(15,23,42,0.1);
      border-radius: 4px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #667eea, #764ba2);
      border-radius: 4px;
      transition: width 0.3s ease;
    }

    @media (max-width: 1100px) {
      .charts-grid {
        grid-template-columns: 1fr;
      }
      .summary-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      .report-filters {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 700px) {
      .sidebar {
        width: 100%;
        position: relative;
        top: 0;
      }
      .summary-grid {
        grid-template-columns: 1fr;
      }
      .report-filters {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="app-container">
    <aside class="sidebar">
      <div class="brand">
        <div class="logo">T</div>
        <div>
          <h3>TMS</h3>
          <div class="small-muted">Qu·∫£n tr·ªã vi√™n</div>
        </div>
      </div>

      <nav class="nav">
        <a href="admin_dashboard.html">üè† Trang ch·ªß</a>
        <a href="manage_teachers.html">üë®‚Äçüè´ Qu·∫£n l√Ω gi√°o vi√™n</a>
        <a href="manage_classes.html">üìö Qu·∫£n l√Ω l·ªõp h·ªçc</a>
        <a href="manage_fees.html">üí∞ Qu·∫£n l√Ω h·ªçc ph√≠</a>
        <a href="reports_admin.html" class="active">üìä B√°o c√°o & Th·ªëng k√™</a>
        <a href="settings_admin.html">‚öôÔ∏è C√†i ƒë·∫∑t</a>
        <a href="login.html" id="logoutBtn">üö™ ƒêƒÉng xu·∫•t</a>
      </nav>
    </aside>

    <main class="main">
      <div class="header-row">
        <div>
          <div class="h1">üìä B√°o c√°o & Th·ªëng k√™</div>
          <div class="small-muted">B√°o c√°o tu√¢n th·ªß Th√¥ng t∆∞ 29/2024/TT-BGDƒêT</div>
        </div>
      </div>

      <!-- Filters -->
      <div class="card">
        <div class="h2">B·ªô l·ªçc b√°o c√°o</div>
        <div class="report-filters">
          <div class="filter-group">
            <label class="filter-label">T·ª´ ng√†y</label>
            <input type="date" class="filter-input" id="fromDate" value="2025-10-01">
          </div>
          <div class="filter-group">
            <label class="filter-label">ƒê·∫øn ng√†y</label>
            <input type="date" class="filter-input" id="toDate" value="2025-10-25">
          </div>
          <div class="filter-group">
            <label class="filter-label">Lo·∫°i h√¨nh</label>
            <select class="filter-select" id="typeFilter">
              <option value="">T·∫•t c·∫£</option>
              <option value="in-school">Trong tr∆∞·ªùng</option>
              <option value="out-school">Ngo√†i tr∆∞·ªùng</option>
            </select>
          </div>
          <div class="filter-group">
            <label class="filter-label">M√¥n h·ªçc</label>
            <select class="filter-select" id="subjectFilter">
              <option value="">T·∫•t c·∫£ m√¥n</option>
              <option value="math">To√°n h·ªçc</option>
              <option value="physics">V·∫≠t l√Ω</option>
              <option value="chemistry">H√≥a h·ªçc</option>
              <option value="english">Ti·∫øng Anh</option>
            </select>
          </div>
        </div>
        <div class="btn-group">
          <button class="btn btn-primary" onclick="generateReport()">üîç T·∫°o b√°o c√°o</button>
          <button class="btn btn-success" onclick="exportReport('excel')">üì• Xu·∫•t Excel</button>
          <button class="btn btn-success" onclick="exportReport('pdf')">üìÑ Xu·∫•t PDF</button>
        </div>
      </div>

      <!-- Summary Cards -->
      <div class="summary-grid">
        <div class="summary-card">
          <div class="icon">üë®‚Äçüè´</div>
          <div class="num" id="summaryTeachers">42</div>
          <div class="label">T·ªïng gi√°o vi√™n</div>
        </div>
        <div class="summary-card">
          <div class="icon">üìö</div>
          <div class="num" id="summaryClasses">67</div>
          <div class="label">T·ªïng l·ªõp h·ªçc</div>
        </div>
        <div class="summary-card">
          <div class="icon">üë®‚Äçüéì</div>
          <div class="num" id="summaryStudents">1,234</div>
          <div class="label">T·ªïng h·ªçc sinh</div>
        </div>
        <div class="summary-card">
          <div class="icon">üí∞</div>
          <div class="num" id="summaryRevenue">450M</div>
          <div class="label">Doanh thu (VNƒê)</div>
        </div>
      </div>

      <!-- Charts -->
      <div class="charts-grid">
        <div class="chart-card">
          <div class="h2">üìà TƒÉng tr∆∞·ªüng ƒëƒÉng k√Ω</div>
          <canvas id="growthChart" style="max-height: 300px;"></canvas>
        </div>
        <div class="chart-card">
          <div class="h2">ü•ß Ph√¢n b·ªë m√¥n h·ªçc</div>
          <canvas id="subjectChart" style="max-height: 300px;"></canvas>
        </div>
        <div class="chart-card full-width">
          <div class="h2">üìä Th·ªëng k√™ doanh thu theo th√°ng</div>
          <canvas id="revenueChart" style="max-height: 300px;"></canvas>
        </div>
      </div>

      <!-- Top Teachers -->
      <div class="card">
        <div class="h2">üèÜ Top gi√°o vi√™n xu·∫•t s·∫Øc</div>
        <table class="table">
          <thead>
            <tr>
              <th>H·∫°ng</th>
              <th>Gi√°o vi√™n</th>
              <th>M√¥n d·∫°y</th>
              <th>S·ªë l·ªõp</th>
              <th>S·ªë h·ªçc sinh</th>
              <th>ƒê√°nh gi√° TB</th>
              <th>T·ª∑ l·ªá ho√†n th√†nh</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>ü•á 1</td>
              <td>Nguy·ªÖn VƒÉn A</td>
              <td>To√°n h·ªçc</td>
              <td>5 l·ªõp</td>
              <td>125 HS</td>
              <td>4.8/5.0</td>
              <td>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 96%;"></div>
                </div>
                96%
              </td>
            </tr>
            <tr>
              <td>ü•à 2</td>
              <td>Tr·∫ßn Th·ªã B</td>
              <td>V·∫≠t l√Ω</td>
              <td>4 l·ªõp</td>
              <td>98 HS</td>
              <td>4.7/5.0</td>
              <td>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 94%;"></div>
                </div>
                94%
              </td>
            </tr>
            <tr>
              <td>ü•â 3</td>
              <td>L√™ VƒÉn C</td>
              <td>H√≥a h·ªçc</td>
              <td>4 l·ªõp</td>
              <td>92 HS</td>
              <td>4.6/5.0</td>
              <td>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 92%;"></div>
                </div>
                92%
              </td>
            </tr>
            <tr>
              <td>4</td>
              <td>Ph·∫°m Th·ªã D</td>
              <td>Ti·∫øng Anh</td>
              <td>3 l·ªõp</td>
              <td>85 HS</td>
              <td>4.5/5.0</td>
              <td>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 90%;"></div>
                </div>
                90%
              </td>
            </tr>
            <tr>
              <td>5</td>
              <td>Ho√†ng VƒÉn E</td>
              <td>Ng·ªØ vƒÉn</td>
              <td>3 l·ªõp</td>
              <td>78 HS</td>
              <td>4.4/5.0</td>
              <td>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 88%;"></div>
                </div>
                88%
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Compliance Report -->
      <div class="card">
        <div class="h2">‚úÖ B√°o c√°o tu√¢n th·ªß Th√¥ng t∆∞ 29</div>
        <table class="table">
          <thead>
            <tr>
              <th>Ti√™u ch√≠</th>
              <th>Y√™u c·∫ßu</th>
              <th>Th·ª±c t·∫ø</th>
              <th>Tr·∫°ng th√°i</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>C√¥ng khai th√¥ng tin l·ªõp h·ªçc</td>
              <td>100%</td>
              <td>100%</td>
              <td style="color: #10b981; font-weight: 600;">‚úì ƒê·∫°t</td>
            </tr>
            <tr>
              <td>ƒêƒÉng k√Ω h·ªì s∆° gi√°o vi√™n</td>
              <td>100%</td>
              <td>100%</td>
              <td style="color: #10b981; font-weight: 600;">‚úì ƒê·∫°t</td>
            </tr>
            <tr>
              <td>Ph√¢n nh√≥m h·ªçc sinh ƒë√∫ng quy ƒë·ªãnh</td>
              <td>100%</td>
              <td>98%</td>
              <td style="color: #f59e0b; font-weight: 600;">‚ö† C·∫ßn c·∫£i thi·ªán</td>
            </tr>
            <tr>
              <td>B√°o c√°o ƒë·ªãnh k·ª≥</td>
              <td>H√†ng th√°ng</td>
              <td>ƒê√∫ng h·∫°n</td>
              <td style="color: #10b981; font-weight: 600;">‚úì ƒê·∫°t</td>
            </tr>
            <tr>
              <td>Kh√¥ng d·∫°y tr∆∞·ªõc ch∆∞∆°ng tr√¨nh</td>
              <td>100%</td>
              <td>100%</td>
              <td style="color: #10b981; font-weight: 600;">‚úì ƒê·∫°t</td>
            </tr>
          </tbody>
        </table>
      </div>
    </main>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
  <script>
    // Initialize Growth Chart
    function initGrowthChart() {
      const ctx = document.getElementById('growthChart').getContext('2d');
      new Chart(ctx, {
        type: 'line',
        data: {
          labels: ['T1', 'T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'T8', 'T9', 'T10'],
          datasets: [{
            label: 'H·ªçc sinh ƒëƒÉng k√Ω',
            data: [50, 75, 90, 110, 130, 155, 180, 210, 240, 280],
            borderColor: '#667eea',
            backgroundColor: 'rgba(102, 126, 234, 0.1)',
            tension: 0.4,
            fill: true
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              display: true
            }
          }
        }
      });
    }

    // Initialize Subject Chart
    function initSubjectChart() {
      const ctx = document.getElementById('subjectChart').getContext('2d');
      new Chart(ctx, {
        type: 'doughnut',
        data: {
          labels: ['To√°n h·ªçc', 'V·∫≠t l√Ω', 'H√≥a h·ªçc', 'Ti·∫øng Anh', 'Ng·ªØ vƒÉn'],
          datasets: [{
            data: [30, 20, 18, 22, 10],
            backgroundColor: [
              '#667eea',
              '#764ba2',
              '#f093fb',
              '#4facfe',
              '#43e97b'
            ]
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              position: 'bottom'
            }
          }
        }
      });
    }

    // Initialize Revenue Chart
    function initRevenueChart() {
      const ctx = document.getElementById('revenueChart').getContext('2d');
      new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ['T1', 'T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'T8', 'T9', 'T10'],
          datasets: [{
            label: 'Doanh thu (tri·ªáu VNƒê)',
            data: [85, 92, 105, 118, 125, 138, 145, 158, 172, 185],
            backgroundColor: 'rgba(102, 126, 234, 0.8)',
            borderColor: '#667eea',
            borderWidth: 2
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            y: {
              beginAtZero: true
            }
          }
        }
      });
    }

    // Generate Report
    function generateReport() {
      const fromDate = document.getElementById('fromDate').value;
      const toDate = document.getElementById('toDate').value;
      const type = document.getElementById('typeFilter').value;
      const subject = document.getElementById('subjectFilter').value;

      console.log('Generating report with filters:', { fromDate, toDate, type, subject });
      alert('ƒêang t·∫°o b√°o c√°o...');
      // In real app: call API to generate report
    }

    // Export Report
    function exportReport(format) {
      alert(`ƒêang xu·∫•t b√°o c√°o ƒë·ªãnh d·∫°ng ${format.toUpperCase()}...`);
      // In real app: trigger file download
      // API: await fetch('/api/admin/reports/export?format=' + format);
    }

    // Load statistics
    async function loadStatistics() {
      // In real app: fetch from API
      // For now, data is already in HTML
    }

    // Logout
    document.getElementById('logoutBtn').addEventListener('click', (e) => {
      e.preventDefault();
      if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën ƒëƒÉng xu·∫•t?')) {
        localStorage.removeItem('currentUser');
        window.location.href = 'login.html';
      }
    });

    // Initialize
    window.addEventListener('DOMContentLoaded', () => {
      initGrowthChart();
      initSubjectChart();
      initRevenueChart();
      loadStatistics();
    });
  </script>
</body>
</html>