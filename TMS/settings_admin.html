<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>TMS - C√†i ƒë·∫∑t</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --primary-600: #0077FF;
      --accent: #6A8CFF;
      --muted: #64748b;
      --shadow-1: 0 2px 8px rgba(0,0,0,0.08);
      --shadow-2: 0 4px 12px rgba(0,0,0,0.1);
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #c8d5ff 0%, #e0d4f7 100%);
      min-height: 100vh;
      padding: 28px;
      color: #0f172a;
    }

    .app-container {
      display: flex;
      gap: 20px;
      max-width: 1400px;
      margin: 0 auto;
    }

    .sidebar {
      width: 260px;
      min-height: calc(100vh - 56px);
      background: linear-gradient(180deg, rgba(255,255,255,0.55), rgba(255,255,255,0.45));
      backdrop-filter: blur(8px);
      border-radius: 16px;
      padding: 20px;
      box-shadow: var(--shadow-2);
      position: sticky;
      top: 28px;
      align-self: flex-start;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .brand {
      display: flex;
      gap: 10px;
      align-items: center;
      padding-bottom: 8px;
      border-bottom: 1px solid rgba(15,23,42,0.04);
    }

    .brand .logo {
      width: 44px;
      height: 44px;
      border-radius: 10px;
      background: var(--accent);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 700;
      box-shadow: var(--shadow-1);
      font-size: 1.5rem;
    }

    .brand h3 {
      font-size: 1rem;
      margin: 0;
    }

    .small-muted {
      font-size: 0.85rem;
      color: var(--muted);
    }

    .nav {
      margin-top: 12px;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .nav a {
      text-decoration: none;
      color: #07305a;
      padding: 10px;
      border-radius: 10px;
      display: flex;
      gap: 10px;
      align-items: center;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .nav a.active, .nav a:hover {
      background: linear-gradient(90deg, rgba(0,119,255,0.12), rgba(106,140,255,0.06));
      color: var(--primary-600);
    }

    .main {
      flex: 1;
      min-height: calc(100vh - 56px);
    }

    .header-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 16px;
      margin-bottom: 20px;
    }

    .h1 {
      font-size: 1.8rem;
      font-weight: 700;
      color: white;
      margin-bottom: 4px;
    }

    .header-row .small-muted {
      color: rgba(255,255,255,0.85);
    }

    .card {
      background: white;
      border-radius: 14px;
      padding: 24px;
      box-shadow: var(--shadow-2);
      margin-bottom: 20px;
    }

    .h2 {
      font-size: 1.3rem;
      font-weight: 700;
      margin-bottom: 16px;
      color: #0f172a;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .form-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group.full-width {
      grid-column: 1 / -1;
    }

    .form-label {
      display: block;
      font-size: 0.9rem;
      font-weight: 600;
      color: #0f172a;
      margin-bottom: 8px;
    }

    .form-input, .form-select, .form-textarea {
      width: 100%;
      padding: 12px;
      border-radius: 10px;
      border: 1px solid rgba(15,23,42,0.1);
      font-size: 0.9rem;
      transition: border 0.3s ease;
    }

    .form-input:focus, .form-select:focus, .form-textarea:focus {
      outline: none;
      border-color: var(--primary-600);
    }

    .form-textarea {
      min-height: 100px;
      resize: vertical;
    }

    .switch-group {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px;
      background: rgba(102,126,234,0.03);
      border-radius: 10px;
      margin-bottom: 12px;
    }

    .switch-label {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .switch-title {
      font-weight: 600;
      color: #0f172a;
    }

    .switch-desc {
      font-size: 0.85rem;
      color: var(--muted);
    }

    .switch {
      position: relative;
      width: 50px;
      height: 26px;
    }

    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: 0.4s;
      border-radius: 34px;
    }

    .slider:before {
      position: absolute;
      content: "";
      height: 18px;
      width: 18px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: 0.4s;
      border-radius: 50%;
    }

    input:checked + .slider {
      background-color: var(--primary-600);
    }

    input:checked + .slider:before {
      transform: translateX(24px);
    }

    .btn {
      padding: 12px 24px;
      border: none;
      border-radius: 10px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.95rem;
    }

    .btn-primary {
      background: var(--primary-600);
      color: white;
    }

    .btn-primary:hover {
      background: #0066dd;
      transform: translateY(-2px);
      box-shadow: var(--shadow-1);
    }

    .btn-danger {
      background: #ef4444;
      color: white;
    }

    .btn-danger:hover {
      background: #dc2626;
    }

    .btn-group {
      display: flex;
      gap: 12px;
      margin-top: 20px;
    }

    .alert {
      padding: 16px;
      border-radius: 10px;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .alert-info {
      background: #dbeafe;
      color: #1e40af;
      border-left: 4px solid #3b82f6;
    }

    .alert-warning {
      background: #fef3c7;
      color: #92400e;
      border-left: 4px solid #f59e0b;
    }

    @media (max-width: 900px) {
      .form-grid {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 700px) {
      .sidebar {
        width: 100%;
        position: relative;
        top: 0;
      }
    }
  </style>
</head>
<body>
  <div class="app-container">
    <aside class="sidebar">
      <div class="brand">
        <div class="logo">T</div>
        <div>
          <h3>TMS</h3>
          <div class="small-muted">Qu·∫£n tr·ªã vi√™n</div>
        </div>
      </div>

      <nav class="nav">
        <a href="admin_dashboard.html">üè† Trang ch·ªß</a>
        <a href="manage_teachers.html">üë®‚Äçüè´ Qu·∫£n l√Ω gi√°o vi√™n</a>
        <a href="manage_classes.html">üìö Qu·∫£n l√Ω l·ªõp h·ªçc</a>
        <a href="manage_fees.html">üí∞ Qu·∫£n l√Ω h·ªçc ph√≠</a>
        <a href="reports_admin.html">üìä B√°o c√°o & Th·ªëng k√™</a>
        <a href="settings_admin.html" class="active">‚öôÔ∏è C√†i ƒë·∫∑t</a>
        <a href="login.html" id="logoutBtn">üö™ ƒêƒÉng xu·∫•t</a>
      </nav>
    </aside>

    <main class="main">
      <div class="header-row">
        <div>
          <div class="h1">‚öôÔ∏è C√†i ƒë·∫∑t H·ªá th·ªëng</div>
          <div class="small-muted">Qu·∫£n l√Ω c·∫•u h√¨nh v√† th√¥ng s·ªë h·ªá th·ªëng TMS</div>
        </div>
      </div>

      <!-- System Info -->
      <div class="card">
        <div class="h2">‚ÑπÔ∏è Th√¥ng tin H·ªá th·ªëng</div>
        <div class="alert alert-info">
          <span>üí°</span>
          <div>
            <strong>Phi√™n b·∫£n h·ªá th·ªëng:</strong> TMS v1.0.0 | <strong>C·∫≠p nh·∫≠t:</strong> 25/10/2025
          </div>
        </div>
        <div class="form-grid">
          <div class="form-group">
            <label class="form-label">T√™n S·ªü GD&ƒêT</label>
            <input type="text" class="form-input" id="deptName" value="S·ªü Gi√°o d·ª•c v√† ƒê√†o t·∫°o TP.HCM">
          </div>
          <div class="form-group">
            <label class="form-label">M√£ S·ªü</label>
            <input type="text" class="form-input" id="deptCode" value="SGDHCM">
          </div>
          <div class="form-group">
            <label class="form-label">Email li√™n h·ªá</label>
            <input type="email" class="form-input" id="contactEmail" value="contact@sgdhcm.edu.vn">
          </div>
          <div class="form-group">
            <label class="form-label">S·ªë ƒëi·ªán tho·∫°i</label>
            <input type="tel" class="form-input" id="contactPhone" value="028-3822-5026">
          </div>
          <div class="form-group full-width">
            <label class="form-label">ƒê·ªãa ch·ªâ</label>
            <input type="text" class="form-input" id="address" value="01 Ho√†ng Di·ªáu, Qu·∫≠n 4, TP.HCM">
          </div>
        </div>
        <div class="btn-group">
          <button class="btn btn-primary" onclick="saveSystemInfo()">üíæ L∆∞u th√¥ng tin</button>
        </div>
      </div>

      <!-- System Settings -->
      <div class="card">
        <div class="h2">üîß C·∫•u h√¨nh H·ªá th·ªëng</div>
        
        <div class="switch-group">
          <div class="switch-label">
            <div class="switch-title">T·ª± ƒë·ªông ph√™ duy·ªát gi√°o vi√™n</div>
            <div class="switch-desc">T·ª± ƒë·ªông ph√™ duy·ªát gi√°o vi√™n c√≥ ƒë·ªß h·ªì s∆° h·ª£p l·ªá</div>
          </div>
          <label class="switch">
            <input type="checkbox" id="autoApproveTeacher">
            <span class="slider"></span>
          </label>
        </div>

        <div class="switch-group">
          <div class="switch-label">
            <div class="switch-title">T·ª± ƒë·ªông ph√™ duy·ªát l·ªõp h·ªçc</div>
            <div class="switch-desc">T·ª± ƒë·ªông ph√™ duy·ªát l·ªõp h·ªçc tu√¢n th·ªß Th√¥ng t∆∞ 29</div>
          </div>
          <label class="switch">
            <input type="checkbox" id="autoApproveClass">
            <span class="slider"></span>
          </label>
        </div>

        <div class="switch-group">
          <div class="switch-label">
            <div class="switch-title">Th√¥ng b√°o email</div>
            <div class="switch-desc">G·ª≠i th√¥ng b√°o qua email cho ng∆∞·ªùi d√πng</div>
          </div>
          <label class="switch">
            <input type="checkbox" id="emailNotification" checked>
            <span class="slider"></span>
          </label>
        </div>

        <div class="switch-group">
          <div class="switch-label">
            <div class="switch-title">Nh·∫Øc nh·ªü thanh to√°n t·ª± ƒë·ªông</div>
            <div class="switch-desc">T·ª± ƒë·ªông g·ª≠i nh·∫Øc nh·ªü h·ªçc ph√≠ ƒë·∫øn h·∫°n</div>
          </div>
          <label class="switch">
            <input type="checkbox" id="autoPaymentReminder" checked>
            <span class="slider"></span>
          </label>
        </div>

        <div class="switch-group">
          <div class="switch-label">
            <div class="switch-title">Ch·∫ø ƒë·ªô b·∫£o tr√¨</div>
            <div class="switch-desc">T·∫°m kh√≥a h·ªá th·ªëng ƒë·ªÉ b·∫£o tr√¨ (ch·ªâ Admin truy c·∫≠p)</div>
          </div>
          <label class="switch">
            <input type="checkbox" id="maintenanceMode">
            <span class="slider"></span>
          </label>
        </div>

        <div class="btn-group">
          <button class="btn btn-primary" onclick="saveSettings()">üíæ L∆∞u c·∫•u h√¨nh</button>
        </div>
      </div>

      <!-- Fee Configuration -->
      <div class="card">
        <div class="h2">üí∞ C·∫•u h√¨nh H·ªçc ph√≠</div>
        <div class="form-grid">
          <div class="form-group">
            <label class="form-label">H·ªçc ph√≠ t·ªëi thi·ªÉu (VNƒê)</label>
            <input type="number" class="form-input" id="minFee" value="500000" min="0" step="100000">
          </div>
          <div class="form-group">
            <label class="form-label">H·ªçc ph√≠ t·ªëi ƒëa (VNƒê)</label>
            <input type="number" class="form-input" id="maxFee" value="5000000" min="0" step="100000">
          </div>
          <div class="form-group">
            <label class="form-label">H·∫°n ƒë√≥ng h·ªçc ph√≠ (ng√†y/th√°ng)</label>
            <input type="number" class="form-input" id="paymentDeadline" value="10" min="1" max="31">
          </div>
          <div class="form-group">
            <label class="form-label">S·ªë ng√†y nh·∫Øc tr∆∞·ªõc h·∫°n</label>
            <input type="number" class="form-input" id="reminderDays" value="3" min="1" max="15">
          </div>
        </div>
        <div class="btn-group">
          <button class="btn btn-primary" onclick="saveFeeConfig()">üíæ L∆∞u c·∫•u h√¨nh h·ªçc ph√≠</button>
        </div>
      </div>

      <!-- Class Configuration -->
      <div class="card">
        <div class="h2">üìö C·∫•u h√¨nh L·ªõp h·ªçc</div>
        <div class="form-grid">
          <div class="form-group">
            <label class="form-label">S·ªë h·ªçc sinh t·ªëi thi·ªÉu/l·ªõp</label>
            <input type="number" class="form-input" id="minStudents" value="5" min="1">
          </div>
          <div class="form-group">
            <label class="form-label">S·ªë h·ªçc sinh t·ªëi ƒëa/l·ªõp</label>
            <input type="number" class="form-input" id="maxStudents" value="30" min="1">
          </div>
          <div class="form-group">
            <label class="form-label">S·ªë bu·ªïi h·ªçc t·ªëi thi·ªÉu/tu·∫ßn</label>
            <input type="number" class="form-input" id="minSessions" value="2" min="1">
          </div>
          <div class="form-group">
            <label class="form-label">S·ªë bu·ªïi h·ªçc t·ªëi ƒëa/tu·∫ßn</label>
            <input type="number" class="form-input" id="maxSessions" value="5" min="1">
          </div>
        </div>
        <div class="btn-group">
          <button class="btn btn-primary" onclick="saveClassConfig()">üíæ L∆∞u c·∫•u h√¨nh l·ªõp h·ªçc</button>
        </div>
      </div>

      <!-- Backup & Security -->
      <div class="card">
        <div class="h2">üîí Sao l∆∞u & B·∫£o m·∫≠t</div>
        <div class="alert alert-warning">
          <span>‚ö†Ô∏è</span>
          <div>
            <strong>L∆∞u √Ω:</strong> C√°c thao t√°c d∆∞·ªõi ƒë√¢y ·∫£nh h∆∞·ªüng ƒë·∫øn to√†n b·ªô d·ªØ li·ªáu h·ªá th·ªëng. Vui l√≤ng th·ª±c hi·ªán c·∫©n th·∫≠n!
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">T·ª± ƒë·ªông sao l∆∞u d·ªØ li·ªáu</label>
          <select class="form-select" id="backupFrequency">
            <option value="daily">H√†ng ng√†y</option>
            <option value="weekly" selected>H√†ng tu·∫ßn</option>
            <option value="monthly">H√†ng th√°ng</option>
          </select>
        </div>
        <div class="btn-group">
          <button class="btn btn-primary" onclick="createBackup()">üíæ T·∫°o b·∫£n sao l∆∞u ngay</button>
          <button class="btn btn-primary" onclick="restoreBackup()">üì• Kh√¥i ph·ª•c d·ªØ li·ªáu</button>
          <button class="btn btn-danger" onclick="clearCache()">üóëÔ∏è X√≥a b·ªô nh·ªõ ƒë·ªám</button>
        </div>
      </div>

      <!-- Danger Zone -->
      <div class="card" style="border: 2px solid #ef4444;">
        <div class="h2" style="color: #ef4444;">‚ö†Ô∏è V√πng Nguy hi·ªÉm</div>
        <div class="alert alert-warning">
          <span>‚ö†Ô∏è</span>
          <div>
            <strong>C·∫£nh b√°o:</strong> C√°c h√†nh ƒë·ªông d∆∞·ªõi ƒë√¢y kh√¥ng th·ªÉ ho√†n t√°c. Vui l√≤ng c√¢n nh·∫Øc k·ªπ!
          </div>
        </div>
        <div class="btn-group">
          <button class="btn btn-danger" onclick="resetSystem()">üîÑ ƒê·∫∑t l·∫°i h·ªá th·ªëng</button>
          <button class="btn btn-danger" onclick="deleteAllData()">üóëÔ∏è X√≥a to√†n b·ªô d·ªØ li·ªáu</button>
        </div>
      </div>
    </main>
  </div>

  <script>
    // Save system info
    function saveSystemInfo() {
      const data = {
        deptName: document.getElementById('deptName').value,
        deptCode: document.getElementById('deptCode').value,
        contactEmail: document.getElementById('contactEmail').value,
        contactPhone: document.getElementById('contactPhone').value,
        address: document.getElementById('address').value
      };
      
      // API: await fetch('/api/admin/settings/system', { method: 'PUT', body: JSON.stringify(data) });
      alert('‚úÖ ƒê√£ l∆∞u th√¥ng tin h·ªá th·ªëng th√†nh c√¥ng!');
    }

    // Save settings
    function saveSettings() {
      const settings = {
        autoApproveTeacher: document.getElementById('autoApproveTeacher').checked,
        autoApproveClass: document.getElementById('autoApproveClass').checked,
        emailNotification: document.getElementById('emailNotification').checked,
        autoPaymentReminder: document.getElementById('autoPaymentReminder').checked,
        maintenanceMode: document.getElementById('maintenanceMode').checked
      };
      
      // API: await fetch('/api/admin/settings/config', { method: 'PUT', body: JSON.stringify(settings) });
      alert('‚úÖ ƒê√£ l∆∞u c·∫•u h√¨nh h·ªá th·ªëng th√†nh c√¥ng!');
    }

    // Save fee config
    function saveFeeConfig() {
      const feeConfig = {
        minFee: document.getElementById('minFee').value,
        maxFee: document.getElementById('maxFee').value,
        paymentDeadline: document.getElementById('paymentDeadline').value,
        reminderDays: document.getElementById('reminderDays').value
      };
      
      // API call
      alert('‚úÖ ƒê√£ l∆∞u c·∫•u h√¨nh h·ªçc ph√≠ th√†nh c√¥ng!');
    }

    // Save class config
    function saveClassConfig() {
      const classConfig = {
        minStudents: document.getElementById('minStudents').value,
        maxStudents: document.getElementById('maxStudents').value,
        minSessions: document.getElementById('minSessions').value,
        maxSessions: document.getElementById('maxSessions').value
      };
      
      // API call
      alert('‚úÖ ƒê√£ l∆∞u c·∫•u h√¨nh l·ªõp h·ªçc th√†nh c√¥ng!');
    }

    // Create backup
    function createBackup() {
      if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën t·∫°o b·∫£n sao l∆∞u d·ªØ li·ªáu?')) {
        // API: await fetch('/api/admin/backup/create', { method: 'POST' });
        alert('‚è≥ ƒêang t·∫°o b·∫£n sao l∆∞u... Qu√° tr√¨nh c√≥ th·ªÉ m·∫•t v√†i ph√∫t.');
      }
    }

    // Restore backup
    function restoreBackup() {
      if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën kh√¥i ph·ª•c d·ªØ li·ªáu? D·ªØ li·ªáu hi·ªán t·∫°i s·∫Ω b·ªã ghi ƒë√®!')) {
        // API: await fetch('/api/admin/backup/restore', { method: 'POST' });
        alert('‚è≥ ƒêang kh√¥i ph·ª•c d·ªØ li·ªáu...');
      }
    }

    // Clear cache
    function clearCache() {
      if (confirm('X√≥a b·ªô nh·ªõ ƒë·ªám s·∫Ω l√†m h·ªá th·ªëng ch·∫°y ch·∫≠m h∆°n trong l·∫ßn ƒë·∫ßu s·ª≠ d·ª•ng. Ti·∫øp t·ª•c?')) {
        // API: await fetch('/api/admin/cache/clear', { method: 'POST' });
        alert('‚úÖ ƒê√£ x√≥a b·ªô nh·ªõ ƒë·ªám th√†nh c√¥ng!');
      }
    }

    // Reset system
    function resetSystem() {
      const confirmation = prompt('‚ö†Ô∏è NGUY HI·ªÇM: ƒê·∫∑t l·∫°i h·ªá th·ªëng s·∫Ω x√≥a t·∫•t c·∫£ c·∫•u h√¨nh. Nh·∫≠p "RESET" ƒë·ªÉ x√°c nh·∫≠n:');
      if (confirmation === 'RESET') {
        // API: await fetch('/api/admin/system/reset', { method: 'POST' });
        alert('üîÑ ƒêang ƒë·∫∑t l·∫°i h·ªá th·ªëng...');
      }
    }

    // Delete all data
    function deleteAllData() {
      const confirmation = prompt('‚ö†Ô∏è NGUY HI·ªÇM: Thao t√°c n√†y s·∫Ω X√ìA Vƒ®NH VI·ªÑN to√†n b·ªô d·ªØ li·ªáu. Nh·∫≠p "DELETE ALL" ƒë·ªÉ x√°c nh·∫≠n:');
      if (confirmation === 'DELETE ALL') {
        // API: await fetch('/api/admin/data/delete-all', { method: 'DELETE' });
        alert('üóëÔ∏è ƒêang x√≥a to√†n b·ªô d·ªØ li·ªáu...');
      }
    }

    // Logout
    document.getElementById('logoutBtn').addEventListener('click', (e) => {
      e.preventDefault();
      if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën ƒëƒÉng xu·∫•t?')) {
        localStorage.removeItem('currentUser');
        window.location.href = 'login.html';
      }
    });

    // Load current settings
    async function loadSettings() {
      // API: const response = await fetch('/api/admin/settings');
      // const settings = await response.json();
      // Populate form fields with current settings
    }

    // Initialize
    window.addEventListener('DOMContentLoaded', () => {
      loadSettings();
    });
  </script>
</body>
</html>